{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "novel-ide://spec-kit/story_spec.schema.json",
  "title": "Spec-Kit StorySpec",
  "type": "object",
  "required": ["spec_kit_version", "story", "structure", "characters", "chapters"],
  "properties": {
    "spec_kit_version": { "type": "string" },
    "story": {
      "type": "object",
      "required": ["title", "logline", "story_type", "target_words", "theme_statement", "theme_keywords", "style"],
      "properties": {
        "title": { "type": "string" },
        "logline": { "type": "string" },
        "story_type": { "type": "string" },
        "target_words": { "type": "integer", "minimum": 1000 },
        "theme_statement": { "type": "string" },
        "theme_keywords": { "type": "array", "items": { "type": "string" } },
        "style": {
          "type": "object",
          "required": ["pov", "tense", "tone"],
          "properties": {
            "pov": { "type": "string" },
            "tense": { "type": "string" },
            "tone": { "type": "string" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "structure": {
      "type": "object",
      "required": ["acts"],
      "properties": {
        "acts": {
          "type": "array",
          "minItems": 3,
          "items": {
            "type": "object",
            "required": ["id", "name", "beats"],
            "properties": {
              "id": { "type": "string" },
              "name": { "type": "string" },
              "beats": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["id", "name", "target_chapter_range", "purpose"],
                  "properties": {
                    "id": { "type": "string" },
                    "name": { "type": "string" },
                    "target_chapter_range": {
                      "type": "array",
                      "items": { "type": "integer", "minimum": 1 },
                      "minItems": 2,
                      "maxItems": 2
                    },
                    "purpose": { "type": "string" }
                  },
                  "additionalProperties": false
                }
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "characters": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "archetype_id", "want", "need", "lie", "arc_steps"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "archetype_id": { "type": "string" },
          "want": { "type": "string" },
          "need": { "type": "string" },
          "lie": { "type": "string" },
          "arc_steps": { "type": "array", "items": { "type": "string" } }
        },
        "additionalProperties": false
      }
    },
    "chapters": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "title", "act", "target_words", "beat_id", "scenes"],
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "act": { "type": "string" },
          "target_words": { "type": "integer", "minimum": 100 },
          "beat_id": { "type": "string" },
          "scenes": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["id", "goal", "conflict", "stakes", "turn", "pov", "location", "characters"],
              "properties": {
                "id": { "type": "string" },
                "goal": { "type": "string" },
                "conflict": { "type": "string" },
                "stakes": { "type": "string" },
                "turn": { "type": "string" },
                "pov": { "type": "string" },
                "location": { "type": "string" },
                "characters": { "type": "array", "items": { "type": "string" } }
              },
              "additionalProperties": false
            }
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
